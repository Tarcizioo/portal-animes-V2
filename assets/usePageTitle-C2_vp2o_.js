import{j as e,q as A,u as v,d as C}from"./index-CMIBCG0R.js";import{r as l,d as R,h as L,L as S,N as w}from"./vendor-C_qnnqqA.js";import{X as N,r as $,a6 as E,a7 as y,a8 as I,T as M,j as O,a9 as q,l as j,c as U,b as F,aa as H,ab as V,U as _,ac as B,ad as Q,a1 as X,v as D}from"./ui-D941AMjE.js";import{l as z,y as G,q as Z}from"./firebase-Db2SPaPN.js";function J({isOpen:t,onClose:r,title:s,children:c}){return l.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t?R.createPortal(e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:r}),e.jsxs("div",{className:"relative w-full max-w-lg bg-white dark:bg-background-dark rounded-xl shadow-2xl transform transition-all animate-in fade-in zoom-in-95 duration-200 border border-gray-200 dark:border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-white/10",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:s}),e.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-white transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-white/10",children:e.jsx(N,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[80vh]",children:c})]})]}),document.body):null}const K=[{id:"light",name:"Claro",icon:E,color:"bg-gray-100"},{id:"sunshine",name:"Sunshine",icon:E,color:"bg-yellow-100"},{id:"matcha",name:"Matcha",icon:y,color:"bg-green-100"},{id:"rose",name:"Rose",icon:y,color:"bg-rose-100"},{id:"dark",name:"Escuro",icon:I,color:"bg-gray-800"},{id:"majorelle",name:"Blue",icon:y,color:"bg-indigo-900"},{id:"blood",name:"Blood",icon:y,color:"bg-red-900"},{id:"dracula",name:"Dracula",icon:y,color:"bg-purple-900"}];function W({isOpen:t,onClose:r}){const{theme:s,setTheme:c}=A(),{deleteAccount:u,user:n}=v(),[a,d]=l.useState(!1),[o,g]=l.useState(""),[m,i]=l.useState(!1),p=async()=>{if(o==="DELETAR"){d(!0);try{await u(),r()}catch(x){alert("Erro ao deletar conta. Talvez seja necessÃ¡rio fazer login novamente por seguranÃ§a."),console.error(x)}finally{d(!1)}}};return e.jsx(J,{isOpen:t,onClose:r,title:"ConfiguraÃ§Ãµes",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"})," AparÃªncia"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:K.map(x=>{const f=x.icon,b=s===x.id;return e.jsxs("button",{onClick:()=>c(x.id),className:`
                    flex flex-col items-center justify-center p-3 rounded-xl border transition-all duration-200
                    ${b?"border-primary bg-primary/10 text-primary":"border-gray-200 dark:border-white/10 hover:border-primary/50 hover:bg-gray-50 dark:hover:bg-white/5"}
`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full mb-2 flex items-center justify-center ${b?"bg-primary text-white":"bg-gray-100 dark:bg-white/10 text-gray-500 dark:text-gray-400"}`,children:e.jsx(f,{className:"w-4 h-4"})}),e.jsx("span",{className:`text-sm font-medium ${b?"text-primary":"text-gray-700 dark:text-gray-300"}`,children:x.name})]},x.id)})})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-4",children:"Outros"}),n?e.jsx("div",{className:"rounded-xl border border-red-500/20 bg-red-500/5 overflow-hidden",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-red-500 font-bold mb-2",children:[e.jsx(M,{className:"w-5 h-5"})," Zona de Perigo"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"A exclusÃ£o da conta Ã© permanente e nÃ£o pode ser desfeita. Todos os seus dados serÃ£o apagados."}),m?e.jsxs("div",{className:"space-y-3 animate-fade-in bg-black/20 p-4 rounded-lg",children:[e.jsxs("label",{className:"text-sm text-gray-300 block",children:["Digite ",e.jsx("span",{className:"font-bold text-white",children:"DELETAR"})," para confirmar:"]}),e.jsx("input",{type:"text",value:o,onChange:x=>g(x.target.value),className:"w-full bg-black/40 border border-red-500/30 rounded-lg px-3 py-2 text-white focus:border-red-500 focus:outline-none text-sm",placeholder:"DELETAR"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:p,disabled:o!=="DELETAR"||a,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-bold transition-colors",children:a?"Apagando...":"Confirmar ExclusÃ£o"}),e.jsx("button",{onClick:()=>{i(!1),g("")},className:"px-4 py-2 bg-transparent text-gray-400 hover:text-white text-sm font-medium",children:"Cancelar"})]})]}):e.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white rounded-lg transition-colors text-sm font-medium flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4"})," Excluir minha conta"]})]})}):e.jsx("div",{className:"p-4 rounded-xl bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"FaÃ§a login para ver as opÃ§Ãµes da conta."})})]})]})})}function P(){const{user:t}=v(),[r,s]=l.useState(null),[c,u]=l.useState(!0);return l.useEffect(()=>{if(!t){s(null),u(!1);return}const a=z(C,"users",t.uid),d=G(a,o=>{o.exists()?s(o.data()):s(null),u(!1)},o=>{console.error("Erro ao buscar perfil:",o),u(!1)});return()=>d()},[t]),{profile:r,loading:c,updateProfileData:async a=>{if(!t)return;const d=z(C,"users",t.uid);try{await Z(d,a,{merge:!0})}catch(o){throw console.error("Erro ao atualizar perfil:",o),o}}}}const Y="/portal-animes-V2/assets/logo-BXHHSxrP.png";function oe(){const[t,r]=l.useState(!1),[s,c]=l.useState(()=>localStorage.getItem("sidebar_collapsed")==="true"),[u,n]=l.useState(!1),{user:a,signOut:d}=v(),{profile:o}=P(),g=L();l.useEffect(()=>{localStorage.setItem("sidebar_collapsed",s)},[s]);const m=()=>r(!t),i=async h=>{h.preventDefault(),h.stopPropagation();try{await d(),g("/")}catch(T){console.error("Erro ao sair:",T)}},p=`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 ease-in-out font-medium w-full whitespace-nowrap overflow-hidden ${s?"justify-center px-2":"text-left"}`,x="bg-button-accent text-text-on-primary shadow-lg shadow-button-accent/25",f="text-text-secondary hover:bg-bg-tertiary hover:text-primary transition-colors",b=o?.displayName||a?.displayName||"Visitante",k=o?.photoURL||a?.photoURL;return e.jsxs(e.Fragment,{children:[e.jsx(W,{isOpen:u,onClose:()=>n(!1)}),e.jsx("button",{onClick:m,className:"md:hidden fixed top-4 left-4 z-50 p-2.5 bg-bg-secondary rounded-lg shadow-lg border border-border-color text-text-primary active:scale-95 transition-transform",children:t?e.jsx(N,{className:"w-6 h-6"}):e.jsx(q,{className:"w-6 h-6"})}),t&&e.jsx("div",{onClick:()=>r(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden"}),e.jsxs("aside",{className:j("fixed md:static inset-y-0 left-0 z-50 bg-bg-secondary border-r border-border-color flex flex-col transition-all duration-300 ease-in-out will-change-[width]",t?"translate-x-0":"-translate-x-full md:translate-x-0",s?"w-20":"w-72"),children:[e.jsx("div",{className:`p-4 flex items-center ${s?"justify-center":"justify-between"} transition-all duration-300`,children:e.jsxs(S,{to:"/",className:`flex items-center gap-2 text-2xl font-black text-primary tracking-tighter group transition-all duration-300 ${s?"justify-center w-full":""}`,children:[e.jsx("div",{className:"w-10 h-10 bg-transparent transition-colors rounded-full flex items-center justify-center shrink-0 overflow-hidden",children:e.jsx("img",{src:Y,alt:"Logo",className:"w-full h-full object-cover"})}),!s&&e.jsxs("span",{className:"text-text-primary group-hover:text-primary transition-colors whitespace-nowrap",children:["Portal",e.jsx("span",{className:"text-primary",children:"Animes"})]})]})}),e.jsx("button",{onClick:()=>c(!s),className:"hidden md:flex absolute -right-3 top-9 bg-bg-secondary border border-border-color rounded-full p-1 text-text-secondary hover:text-primary transition-colors shadow-sm z-50",children:s?e.jsx(U,{className:"w-4 h-4"}):e.jsx(F,{className:"w-4 h-4"})}),e.jsxs("nav",{className:"flex-1 px-3 space-y-2 overflow-y-auto overflow-x-hidden py-4 scrollbar-thin scrollbar-thumb-surface-dark/20 hover:scrollbar-thumb-surface-dark/40",children:[!s&&e.jsx("div",{className:"text-xs font-bold text-text-secondary/60 uppercase px-4 mb-2 tracking-wider",children:"Menu"}),e.jsxs(w,{to:"/",onClick:()=>r(!1),className:({isActive:h})=>j(p,h?x:f),title:s?"InÃ­cio":"",children:[e.jsx(H,{className:"w-5 h-5 shrink-0"})," ",!s&&"InÃ­cio"]}),e.jsxs(w,{to:"/catalog",onClick:()=>r(!1),className:({isActive:h})=>j(p,h?x:f),title:s?"CatÃ¡logo":"",children:[e.jsx(V,{className:"w-5 h-5 shrink-0"})," ",!s&&"CatÃ¡logo"]}),e.jsxs(w,{to:"/characters",onClick:()=>r(!1),className:({isActive:h})=>j(p,h?x:f),title:s?"Personagens":"",children:[e.jsx(_,{className:"w-5 h-5 shrink-0"})," ",!s&&"Personagens"]}),e.jsx("div",{className:"pt-4 pb-2",children:e.jsx("div",{className:"h-px bg-border-color mx-4"})}),!s&&e.jsx("div",{className:"text-xs font-bold text-text-secondary/60 uppercase px-4 mb-2 tracking-wider",children:"Geral"}),e.jsxs("button",{onClick:()=>{r(!1),n(!0)},title:s?"ConfiguraÃ§Ãµes":"",className:j(p,f),children:[e.jsx(B,{className:"w-5 h-5 shrink-0"})," ",!s&&"ConfiguraÃ§Ãµes"]})]}),e.jsx("div",{className:"p-4 border-t border-border-color bg-bg-tertiary",children:e.jsxs(S,{to:"/profile",onClick:()=>r(!1),className:`flex items-center gap-3 p-3 rounded-xl bg-bg-secondary border border-border-color shadow-sm hover:shadow-md hover:border-primary/30 transition-all cursor-pointer group relative overflow-hidden ${s?"justify-center w-12 h-12 p-0":""}`,title:s?b:"Ver Perfil",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/0 group-hover:bg-primary/5 transition-colors"}),e.jsxs("div",{className:"relative z-10 shrink-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-primary to-button-accent flex items-center justify-center text-white font-bold text-sm overflow-hidden ring-2 ring-transparent group-hover:ring-primary/20 transition-all",children:k?e.jsx("img",{src:k,alt:b,className:"w-full h-full object-cover"}):e.jsx("span",{className:"uppercase",children:b.slice(0,2)})}),e.jsx("span",{className:`absolute bottom-0 right-0 w-3 h-3 border-2 border-bg-secondary rounded-full ${a?"bg-green-500":"bg-gray-500"}`})]}),!s&&e.jsxs("div",{className:"flex-1 min-w-0 z-10 ml-1",children:[e.jsx("h4",{className:"text-sm font-bold text-text-primary truncate group-hover:text-primary transition-colors",children:b}),e.jsx("p",{className:"text-xs text-text-secondary truncate",children:a?"Visualizar perfil":"Fazer Login"})]}),!s&&e.jsx("div",{className:"z-10 p-1.5 text-text-secondary group-hover:text-primary transition-colors",onClick:a?i:void 0,title:a?"Sair":"Entrar",children:a?e.jsx(Q,{className:"w-4 h-4"}):e.jsx(X,{className:"w-4 h-4"})})]})})]})]})}function ee(){const[t,r]=l.useState(""),[s,c]=l.useState([]),[u,n]=l.useState(!1);return l.useEffect(()=>{if(t.length<3){c([]);return}const a=setTimeout(async()=>{n(!0);try{const g=((await(await fetch(`https://api.jikan.moe/v4/anime?q=${t}&limit=5`)).json()).data||[]).map(m=>({id:m.mal_id,title:m.title_english||m.title,image:m.images?.jpg?.image_url,score:m.score,year:m.year||"N/A"}));c(g)}catch(d){console.error("Erro na busca:",d)}finally{n(!1)}},500);return()=>clearTimeout(a)},[t]),{query:t,setQuery:r,results:s,isSearching:u,setResults:c}}function le(){const{query:t,setQuery:r,results:s,setResults:c}=ee(),u=L(),[n,a]=l.useState(!1),{user:d}=v(),{profile:o}=P(),g=o?.displayName||d?.displayName||"Visitante",m=i=>{u(`/anime/${i}`),r(""),c([]),a(!1)};return e.jsx(e.Fragment,{children:e.jsxs("header",{className:"sticky top-0 z-40 bg-bg-primary/80 backdrop-blur-md px-4 md:px-8 py-4 flex items-center justify-between border-b border-border-color transition-colors duration-300",children:[e.jsx("div",{className:"flex items-center gap-4 pl-12 md:pl-0",children:e.jsxs("div",{className:`${n?"hidden md:block":"block"}`,children:[e.jsxs("h1",{className:"text-xl font-bold text-text-primary",children:["OlÃ¡, ",g,"!! ðŸ‘‹"]}),e.jsx("p",{className:"text-sm text-text-secondary hidden sm:block",children:"Descubra novos animes."})]})}),!n&&e.jsx("div",{className:"flex items-center gap-2 md:hidden ml-auto",children:e.jsx("button",{onClick:()=>a(!0),className:"p-2 text-text-secondary hover:text-primary",children:e.jsx(D,{className:"w-6 h-6"})})}),e.jsx("div",{className:`relative group w-full max-w-md ml-auto transition-all duration-300 ${n?"block":"hidden md:flex items-center gap-4"}`,children:e.jsx("div",{className:`${n?"fixed inset-0 z-50 bg-bg-primary px-4 flex items-center":"relative w-full"}`,children:e.jsxs("div",{className:`relative w-full ${n?"max-w-full":"max-w-md"}`,children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:"w-5 h-5 text-text-secondary"})}),e.jsx("input",{type:"text",value:t,onChange:i=>r(i.target.value),placeholder:"Pesquisar...",autoFocus:n,className:"block w-full pl-10 pr-10 py-2.5 border-none rounded-xl bg-bg-tertiary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary placeholder-text-secondary/50"}),n&&e.jsx("button",{onClick:()=>a(!1),className:"absolute inset-y-0 right-2 flex items-center p-2 text-text-secondary hover:text-primary",children:e.jsx(N,{className:"w-5 h-5"})}),s.length>0&&e.jsx("div",{className:"absolute top-full mt-2 left-0 w-full bg-bg-secondary rounded-xl shadow-2xl z-50 max-h-[60vh] overflow-y-auto border border-border-color",children:s.map(i=>e.jsxs("div",{onClick:()=>m(i.id),className:"flex gap-3 p-3 hover:bg-primary/10 cursor-pointer border-b border-border-color last:border-0",children:[e.jsx("img",{src:i.image,className:"w-8 h-12 object-cover rounded",alt:i.title}),e.jsx("div",{className:"text-sm text-text-primary",children:i.title})]},i.id))})]})})})]})})}function ne(t){l.useEffect(()=>{document.title=`Portal Animes | ${t}`},[t])}export{le as H,oe as S,P as a,Y as l,ne as u};
