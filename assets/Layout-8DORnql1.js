import{j as e,u as A}from"./index-WO8Vze9W.js";import{M as F,i as $,b as _,P as W,c as B,d as G,L as T,e as D,U as K,m as E,S as X,H as V,F as Y}from"./usePageTitle-CnQz42EV.js";import{r as o,h as q,u as J}from"./vendor-CzuZ2vSz.js";import{X as Q,U as Z,G as ee,a6 as te,a7 as se,a3 as ne,a8 as re,a4 as oe,a0 as ae,a9 as ie,m as P}from"./ui-CEkGWVZx.js";function O(s,l){if(typeof s=="function")return s(l);s!=null&&(s.current=l)}function le(...s){return l=>{let n=!1;const a=s.map(i=>{const d=O(i,l);return!n&&typeof d=="function"&&(n=!0),d});if(n)return()=>{for(let i=0;i<a.length;i++){const d=a[i];typeof d=="function"?d():O(s[i],null)}}}}function ce(...s){return o.useCallback(le(...s),s)}class de extends o.Component{getSnapshotBeforeUpdate(l){const n=this.props.childRef.current;if(n&&l.isPresent&&!this.props.isPresent){const a=n.offsetParent,i=$(a)&&a.offsetWidth||0,d=$(a)&&a.offsetHeight||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=i-r.width-r.left,r.bottom=d-r.height-r.top}return null}componentDidUpdate(){}render(){return this.props.children}}function ue({children:s,isPresent:l,anchorX:n,anchorY:a,root:i}){const d=o.useId(),r=o.useRef(null),b=o.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:m}=o.useContext(F),v=s.props?.ref??s?.ref,f=ce(r,v);return o.useInsertionEffect(()=>{const{width:g,height:t,top:c,left:h,right:y,bottom:j}=b.current;if(l||!r.current||!g||!t)return;const k=n==="left"?`left: ${h}`:`right: ${y}`,R=a==="bottom"?`bottom: ${j}`:`top: ${c}`;r.current.dataset.motionPopId=d;const C=document.createElement("style");m&&(C.nonce=m);const p=i??document.head;return p.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${t}px !important;
            ${k}px !important;
            ${R}px !important;
          }
        `),()=>{p.contains(C)&&p.removeChild(C)}},[l]),e.jsx(de,{isPresent:l,childRef:r,sizeRef:b,children:o.cloneElement(s,{ref:f})})}const fe=({children:s,initial:l,isPresent:n,onExitComplete:a,custom:i,presenceAffectsLayout:d,mode:r,anchorX:b,anchorY:m,root:v})=>{const f=_(pe),g=o.useId();let t=!0,c=o.useMemo(()=>(t=!1,{id:g,initial:l,isPresent:n,custom:i,onExitComplete:h=>{f.set(h,!0);for(const y of f.values())if(!y)return;a&&a()},register:h=>(f.set(h,!1),()=>f.delete(h))}),[n,f,a]);return d&&t&&(c={...c}),o.useMemo(()=>{f.forEach((h,y)=>f.set(y,!1))},[n]),o.useEffect(()=>{!n&&!f.size&&a&&a()},[n]),r==="popLayout"&&(s=e.jsx(ue,{isPresent:n,anchorX:b,anchorY:m,root:v,children:s})),e.jsx(W.Provider,{value:c,children:s})};function pe(){return new Map}const N=s=>s.key||"";function U(s){const l=[];return o.Children.forEach(s,n=>{o.isValidElement(n)&&l.push(n)}),l}const he=({children:s,custom:l,initial:n=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:d="sync",propagate:r=!1,anchorX:b="left",anchorY:m="top",root:v})=>{const[f,g]=B(r),t=o.useMemo(()=>U(s),[s]),c=r&&!f?[]:t.map(N),h=o.useRef(!0),y=o.useRef(t),j=_(()=>new Map),k=o.useRef(new Set),[R,C]=o.useState(t),[p,I]=o.useState(t);G(()=>{h.current=!1,y.current=t;for(let x=0;x<p.length;x++){const u=N(p[x]);c.includes(u)?(j.delete(u),k.current.delete(u)):j.get(u)!==!0&&j.set(u,!1)}},[p,c.length,c.join("-")]);const M=[];if(t!==R){let x=[...t];for(let u=0;u<p.length;u++){const w=p[u],S=N(w);c.includes(S)||(x.splice(u,0,w),M.push(w))}return d==="wait"&&M.length&&(x=M),I(U(x)),C(t),null}const{forceRender:z}=o.useContext(T);return e.jsx(e.Fragment,{children:p.map(x=>{const u=N(x),w=r&&!f?!1:t===p||c.includes(u),S=()=>{if(k.current.has(u))return;if(k.current.add(u),j.has(u))j.set(u,!0);else return;let L=!0;j.forEach(H=>{H||(L=!1)}),L&&(z?.(),I(y.current),r&&g?.(),a&&a())};return e.jsx(fe,{isPresent:w,initial:!h.current||n?void 0:!1,custom:l,presenceAffectsLayout:i,mode:d,root:v,onExitComplete:w?void 0:S,anchorX:b,anchorY:m,children:x},u)})})};function xe(){const s=q(),l=J(),{signOut:n}=A(),[a,i]=o.useState(!1),[d,r]=o.useState(!1),[b,m]=o.useState(!1),v=[{icon:ne,label:"Início",path:"/"},{icon:re,label:"Catálogo",path:"/catalog"},{icon:oe,label:"Biblioteca",path:"/library"},{icon:ae,label:"Perfil",path:"/profile"},{icon:ie,label:"Menu",action:()=>i(!0)}],f=async()=>{try{await n(),s("/"),i(!1)}catch(t){console.error("Erro ao sair:",t)}},g=[{icon:Z,label:"Personagens",onClick:()=>{s("/characters"),i(!1)},color:"text-purple-400",bg:"bg-purple-500/10"},{icon:ee,label:"Explorar Usuários",onClick:()=>{m(!0),i(!1)},color:"text-blue-400",bg:"bg-blue-500/10"},{icon:te,label:"Configurações",onClick:()=>{r(!0),i(!1)},color:"text-gray-400",bg:"bg-gray-500/10"}];return e.jsxs(e.Fragment,{children:[e.jsx(D,{isOpen:d,onClose:()=>r(!1)}),e.jsx(K,{isOpen:b,onClose:()=>m(!1)}),e.jsx(he,{children:a&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm md:hidden flex items-end pb-20 justify-center px-4",onClick:()=>i(!1),children:e.jsxs(E.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"bg-bg-secondary border border-border-color w-full max-w-sm rounded-2xl p-4 shadow-2xl relative overflow-hidden",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-border-color",children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary",children:"Menu"}),e.jsx("button",{onClick:()=>i(!1),className:"p-2 bg-bg-tertiary rounded-full text-text-secondary",children:e.jsx(Q,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:g.map((t,c)=>e.jsxs("button",{onClick:t.onClick,className:"flex flex-col items-center justify-center gap-2 p-4 bg-bg-tertiary hover:bg-bg-primary rounded-xl border border-transparent hover:border-border-color transition-all active:scale-95",children:[e.jsx("div",{className:`p-3 rounded-full ${t.bg} ${t.color}`,children:e.jsx(t.icon,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-medium text-text-primary",children:t.label})]},c))}),e.jsxs("button",{onClick:f,className:"w-full py-3 flex items-center justify-center gap-2 text-red-400 font-bold bg-red-500/10 hover:bg-red-500/20 rounded-xl transition-colors",children:[e.jsx(se,{className:"w-4 h-4"})," Sair da Conta"]})]})})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 md:hidden pb-safe",children:e.jsx("div",{className:"bg-bg-primary/80 dark:bg-black/80 backdrop-blur-2xl border-t border-border-color shadow-[0_-4px_30px_rgba(0,0,0,0.1)] dark:shadow-[0_-4px_30px_rgba(0,0,0,0.5)]",children:e.jsx("nav",{className:"flex justify-around items-center h-16 px-2",children:v.map(t=>{const c=t.path?l.pathname===t.path:a;return e.jsxs("button",{onClick:()=>t.action?t.action():s(t.path),className:"relative flex flex-col items-center justify-center w-full h-full gap-1 group",children:[c&&!a&&t.path&&e.jsx(E.div,{layoutId:"bottomNavIndicator",className:"absolute -top-[1px] w-12 h-[2px] bg-primary shadow-[0_0_10px_var(--color-primary)]"}),e.jsx("div",{className:P("p-1.5 rounded-xl transition-all duration-300",c?"text-primary bg-primary/10":"text-text-secondary group-hover:text-text-primary"),children:e.jsx(t.icon,{strokeWidth:c?2.5:2,className:P("w-6 h-6 transition-transform duration-300",c&&"scale-110")})}),e.jsx("span",{className:P("text-[10px] font-medium transition-colors duration-300",c?"text-primary":"text-text-secondary"),children:t.label})]},t.label)})})})})]})}function je({children:s,showHeader:l=!0,showFooter:n=!0}){return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-background-light dark:bg-background-dark text-text-primary font-sans",children:[e.jsx("div",{className:"hidden md:flex",children:e.jsx(X,{})}),e.jsxs("main",{className:"flex-1 h-full overflow-y-auto relative flex flex-col w-full scrollbar-thin scrollbar-thumb-surface-dark/20 hover:scrollbar-thumb-surface-dark/40",children:[l&&e.jsx(V,{}),e.jsx("div",{className:"flex-1 pb-24 md:pb-0",children:s}),n&&e.jsx(Y,{})]}),e.jsx(xe,{})]})}export{he as A,je as L};
