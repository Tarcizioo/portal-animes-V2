import{r as o,j as e,L as y}from"./index-D8rTibQB.js";import{u as w,S as N,H as k,U as C}from"./usePageTitle-CFjCZMnZ.js";import{H as M}from"./heart-W2pPYNjN.js";import"./house-CFbmez8f.js";function S(){const[r,t]=o.useState([]),[i,c]=o.useState(!0),[n,a]=o.useState(1),[s,g]=o.useState(!0);o.useEffect(()=>{let d=!0;const u=new AbortController;async function f(){try{c(!0),await new Promise(x=>setTimeout(x,600));const l=await fetch(`https://api.jikan.moe/v4/top/characters?page=${n}&limit=25`,{signal:u.signal});if(!l.ok)throw new Error(`Status: ${l.status}`);const p=await l.json();if(!d)return;const m=p.data||[],j=p.pagination||{};t(x=>{if(n===1)return m;const v=[...x,...m];return Array.from(new Map(v.map(h=>[h.mal_id,h])).values())}),g(j.has_next_page||m.length>0&&m.length>=25)}catch(l){l.name!=="AbortError"&&console.error("Erro fetch characters:",l)}finally{d&&c(!1)}}return f(),()=>{d=!1,u.abort()}},[n]);const b=o.useCallback(()=>{!i&&s&&a(d=>d+1)},[i,s]);return{characters:r,loading:i,loadMore:b,hasMore:s}}function _({character:r,rank:t}){return e.jsxs(y,{to:`/character/${r.mal_id}`,className:"block group relative bg-bg-secondary rounded-2xl overflow-hidden shadow-sm border border-border-color hover:border-primary/50 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl",children:[e.jsxs("div",{className:"aspect-[3/4] overflow-hidden relative",children:[e.jsx("img",{src:r.images?.jpg?.image_url,alt:r.name,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute top-2 left-2 bg-black/60 backdrop-blur-md px-3 py-1.5 rounded-lg flex items-center justify-center border border-white/10 shadow-lg",children:e.jsxs("span",{className:"text-white font-bold text-sm",children:["#",t]})})]}),e.jsxs("div",{className:"p-4 bg-bg-secondary group-hover:bg-bg-tertiary transition-colors",children:[e.jsx("h3",{className:"text-base font-bold text-text-primary truncate mb-3",title:r.name,children:r.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] font-bold bg-primary/10 text-primary px-2 py-1 rounded-md truncate max-w-[60%] border border-primary/20",children:r.name_kanji||"N/A"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-red-500 bg-red-500/10 px-2 py-1 rounded-md",children:[e.jsx(M,{className:"w-3.5 h-3.5 fill-current"}),e.jsx("span",{children:(r.favorites||0).toLocaleString()})]})]})]})]})}function $(){const{characters:r,loading:t,loadMore:i,hasMore:c}=S(),n=o.useRef(null);return w("Personagens"),o.useEffect(()=>{const a=new IntersectionObserver(s=>{s[0].isIntersecting&&c&&!t&&i()},{rootMargin:"200px"});return n.current&&a.observe(n.current),()=>a.disconnect()},[c,t,i]),e.jsxs("div",{className:"flex h-screen overflow-hidden bg-bg-primary text-text-primary font-sans",children:[e.jsx(N,{}),e.jsxs("main",{className:"flex-1 h-full overflow-y-auto relative scrollbar-thin scrollbar-thumb-surface-dark scrollbar-track-bg-primary",children:[e.jsx(k,{}),e.jsxs("div",{className:"p-6 lg:p-10 max-w-[1600px] mx-auto",children:[e.jsx("div",{className:"mb-10 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-black text-text-primary mb-2 flex items-center gap-3",children:[e.jsx(C,{className:"w-10 h-10 text-primary"}),"Top Personagens"]}),e.jsx("p",{className:"text-lg text-text-secondary",children:"Os personagens mais amados pela comunidade mundial."})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[r.map((a,s)=>e.jsx(_,{character:a,rank:s+1},a.mal_id)),t&&Array.from({length:10}).map((a,s)=>e.jsx("div",{className:"bg-bg-secondary rounded-2xl overflow-hidden shadow-sm border border-border-color aspect-[3/4] animate-pulse relative",children:e.jsx("div",{className:"absolute inset-0 bg-gray-700/50"})},`skeleton-${s}`))]}),e.jsx("div",{ref:n,className:"h-10 mt-8"}),!t&&r.length===0&&e.jsx("p",{className:"text-text-secondary text-center mt-10",children:"Nenhum personagem encontrado."})]})]})]})}export{$ as Characters};
