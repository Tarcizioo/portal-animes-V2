import{d as j,j as e}from"./index-CPSkf6_A.js";import{r as n,f as N}from"./vendor-CzuZ2vSz.js";import{l as w,n as P,v as S,A as F}from"./firebase-sbJdvLJZ.js";import{u as E,S as p,H as b,F as k}from"./usePageTitle-XJJnLCUf.js";import{S as g,P as A,F as O,A as D}from"./Skeleton-DYrls3D2.js";import{G as H,C as L,E as C,K as G}from"./ui-DGQG60Ii.js";import"./useAnimeLibrary-thLaFgu-.js";function M(i){const[s,x]=n.useState(null),[f,m]=n.useState([]),[u,r]=n.useState(!0),[o,a]=n.useState(null);return n.useEffect(()=>{async function t(){if(i){r(!0),a(null);try{const l=w(j,"users",i),c=await P(l);if(!c.exists()){a("Usuário não encontrado"),r(!1);return}const d=c.data();if(!(d.isPublic!==!1)){a("Este perfil é privado."),r(!1);return}const y=S(j,"users",i,"library"),v=(await F(y)).docs.map(h=>({id:parseInt(h.id),...h.data()}));x(d),m(v)}catch(l){console.error("Erro ao carregar perfil público:",l),a("Falha ao carregar perfil")}finally{r(!1)}}}t()},[i]),{profile:s,library:f,loading:u,error:o}}function z(){const{uid:i}=N(),{profile:s,library:x,loading:f,error:m}=M(i);E(s?`Perfil de ${s.displayName}`:"Perfil Público");const u=n.useMemo(()=>{const r=x?.filter(t=>t.isFavorite)||[],o=s?.favoritesOrder||[];if(!o.length)return r;const a=new Map(o.map((t,l)=>[String(t),l]));return[...r].sort((t,l)=>{const c=a.get(String(t.id))??1/0,d=a.get(String(l.id))??1/0;return c===d?0:c-d})},[x,s?.favoritesOrder]);return f?e.jsxs("div",{className:"flex h-screen overflow-hidden bg-bg-primary text-text-primary font-sans",children:[e.jsx(p,{}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx(b,{}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-10",children:[e.jsx(g,{className:"h-64 w-full rounded-2xl mb-20"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((r,o)=>e.jsx(g,{className:"h-24 rounded-2xl"},o))})]})})]})]}):m||!s?e.jsxs("div",{className:"flex h-screen overflow-hidden bg-bg-primary text-text-primary font-sans",children:[e.jsx(p,{}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx(b,{}),e.jsx("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:e.jsx("div",{className:"text-center space-y-4",children:m==="Este perfil é privado."?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-bg-secondary p-6 rounded-full inline-block mb-2",children:e.jsx(H,{className:"w-16 h-16 text-text-secondary mx-auto"})}),e.jsx("h2",{className:"text-3xl font-bold",children:"Perfil Privado"}),e.jsx("p",{className:"text-text-secondary max-w-md mx-auto",children:"Este usuário optou por manter seu perfil e biblioteca privados."})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-16 h-16 text-red-500 mx-auto"}),e.jsx("h2",{className:"text-3xl font-bold",children:"Usuário não encontrado"}),e.jsx("p",{className:"text-text-secondary",children:"O perfil que você procura não existe."})]})})})]})]}):e.jsxs("div",{className:"flex h-screen overflow-hidden bg-bg-primary text-text-primary font-sans",children:[e.jsx(p,{}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx(b,{}),e.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 scrollbar-thin scrollbar-thumb-surface-dark scrollbar-track-bg-primary",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-10",children:[e.jsx(A,{user:null,profile:s,readOnly:!0}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(O,{animeFavorites:u,characterFavorites:[],readOnly:!0}),e.jsx(D,{readOnly:!0})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-bg-secondary border border-border-color rounded-2xl p-6",children:[e.jsxs("h3",{className:"font-bold text-text-primary mb-4 flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-button-accent"})," Gêneros Favoritos"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.favoriteGenres?.map(r=>e.jsx("span",{className:"px-3 py-1 bg-white/5 border border-white/10 rounded-full text-xs text-text-secondary",children:r},r))})]}),e.jsxs("div",{className:"bg-bg-secondary border border-border-color rounded-2xl p-6",children:[e.jsxs("h3",{className:"font-bold text-text-primary mb-4 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-button-accent"})," Conexões"]}),e.jsxs("ul",{className:"space-y-3 text-sm text-text-secondary",children:[s.connections?.discord&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})," ",s.connections.discord]}),s.connections?.twitter&&e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"})," ",s.connections.twitter]})]})]})]})]})]}),e.jsx(k,{})]})]})]})}export{z as PublicProfile};
