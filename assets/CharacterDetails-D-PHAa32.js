import{j as e,L as C,o as A}from"./index-CMIBCG0R.js";import{r as t,f as $,L as F}from"./vendor-C_qnnqqA.js";import{u as R,S as V,H as z}from"./usePageTitle-C2_vp2o_.js";import{F as P}from"./Footer-CHSrnIhr.js";import{b as I,c as T,H as N,a2 as E,s as L,F as M,l as G,a3 as H,X as w}from"./ui-D941AMjE.js";import"./firebase-Db2SPaPN.js";function J(s){const[a,m]=t.useState(null),[d,o]=t.useState([]),[h,i]=t.useState([]),[n,g]=t.useState([]),[b,x]=t.useState(!0);return t.useEffect(()=>{if(!s)return;async function v(){try{x(!0),await new Promise(_=>setTimeout(_,300));const[p,u,j,f]=await Promise.all([fetch(`https://api.jikan.moe/v4/characters/${s}/full`),fetch(`https://api.jikan.moe/v4/characters/${s}/anime`),fetch(`https://api.jikan.moe/v4/characters/${s}/voices`),fetch(`https://api.jikan.moe/v4/characters/${s}/pictures`)]),y=await p.json(),r=await u.json(),c=await j.json(),k=await f.json(),l=y.data,S={id:l.mal_id,name:l.name,name_kanji:l.name_kanji,about:l.about,favorites:l.favorites,image:l.images?.jpg?.image_url,large_image:l.images?.jpg?.large_image_url||l.images?.jpg?.image_url,url:l.url,nicknames:l.nicknames||[]};m(S),o(r.data||[]),i(c.data||[]),g(k.data||[])}catch(p){console.error("Error loading character details:",p)}finally{x(!1)}}v()},[s]),{character:a,animeography:d,voiceActors:h,pictures:n,loading:b}}function D({items:s,title:a,icon:m,renderItem:d}){const o=t.useRef(null),h=i=>{if(o.current){const{current:n}=o,g=i==="left"?-n.offsetWidth:n.offsetWidth;n.scrollBy({left:g,behavior:"smooth"})}};return!s||s.length===0?null:e.jsxs("div",{className:"relative group/carousel",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[a&&e.jsxs("h3",{className:"text-2xl font-black text-text-primary flex items-center gap-3",children:[m&&e.jsx("span",{className:"p-2 mr-1 bg-gradient-to-br from-primary/20 to-primary/5 rounded-lg text-primary",children:e.jsx(m,{className:"w-6 h-6"})}),a]}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover/carousel:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>h("left"),className:"p-2 rounded-full bg-bg-secondary hover:bg-primary hover:text-white transition-colors border border-border-color",children:e.jsx(I,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>h("right"),className:"p-2 rounded-full bg-bg-secondary hover:bg-primary hover:text-white transition-colors border border-border-color",children:e.jsx(T,{className:"w-5 h-5"})})]})]}),e.jsx("div",{ref:o,className:"flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:s.map((i,n)=>e.jsx("div",{className:"snap-start shrink-0",children:d?d(i):e.jsx("div",{className:"w-[200px] h-[300px] bg-bg-secondary rounded-xl"})},n))})]})}function Q(){const{id:s}=$(),{character:a,animeography:m,voiceActors:d,pictures:o,loading:h}=J(s),[i,n]=t.useState(!1);R(a?.name||"Detalhes do Personagem");const g=r=>r?r>1e3?(r/1e3).toFixed(1)+"k":r.toString():"0",[b,x]=t.useState(null),[v,p]=t.useState(!1),[u,j]=t.useState(!1);if(t.useEffect(()=>{const r=setTimeout(()=>j(!0),100);return()=>clearTimeout(r)},[]),h)return e.jsx("div",{className:"flex h-screen bg-bg-primary text-primary items-center justify-center",children:e.jsx(C,{})});if(!a)return null;const f=d.filter(r=>r.language==="Japanese").slice(0,4),y=f.length>0?f:d.slice(0,4);return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-bg-primary text-text-primary font-sans selection:bg-primary selection:text-white",children:[e.jsx(V,{}),e.jsx(A,{}),e.jsxs("main",{className:"flex-1 h-full overflow-y-auto relative scrollbar-thin scrollbar-thumb-bg-secondary scrollbar-track-bg-primary",children:[e.jsx(z,{}),e.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 transition-opacity duration-700 ${u?"opacity-100":"opacity-0"}`,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[300px_1fr] gap-8 items-start",children:[e.jsxs("div",{className:`space-y-4 transition-all duration-700 delay-100 ${u?"opacity-100 translate-x-0":"opacity-0 -translate-x-10"}`,children:[e.jsxs("div",{className:"relative rounded-xl overflow-hidden shadow-2xl border border-border-color bg-bg-secondary aspect-[2/3] group",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-60"}),a.favorites&&e.jsxs("div",{className:"absolute top-2 left-2 px-3 py-1 bg-black/60 backdrop-blur-md rounded-lg text-xs font-bold text-white border border-white/10 shadow-lg flex items-center gap-1",children:[e.jsx(N,{className:"w-3 h-3 text-red-500 fill-red-500"})," ",g(a.favorites)," FAVORITOS"]})]}),e.jsx("div",{className:"bg-bg-secondary rounded-xl p-4 border border-border-color shadow-sm hover:border-primary/30 transition-colors duration-300",children:e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-bg-tertiary to-bg-secondary hover:from-primary hover:to-primary/80 text-text-primary hover:text-white py-3 rounded-lg font-bold transition-all duration-300 border border-border-color hover:border-primary shadow-sm hover:shadow-primary/25 active:scale-[0.98] group relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent translate-x-[-100%] group-hover:animate-shimmer"}),e.jsx(N,{className:"w-5 h-5 group-hover:fill-current transition-colors"}),e.jsxs("div",{className:"flex flex-col items-start leading-tight",children:[e.jsx("span",{className:"text-xs font-normal opacity-70 group-hover:opacity-100",children:"Adicionar aos"}),e.jsx("span",{children:"Favoritos"})]})]})})]}),e.jsxs("div",{className:`space-y-6 min-w-0 transition-all duration-700 delay-200 ${u?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-text-primary to-text-secondary tracking-tight",children:a.name}),a.name_kanji&&e.jsx("div",{className:"inline-block mt-2 px-3 py-1 rounded-md bg-bg-secondary border border-border-color text-sm text-primary font-bold shadow-sm",children:a.name_kanji})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-2xl p-6 md:p-8 border border-border-color shadow-sm hover:shadow-lg hover:shadow-primary/5 hover:border-primary/20 transition-all duration-300 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-[50px] -translate-y-1/2 translate-x-1/2 group-hover:bg-primary/10 transition-colors"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:e.jsx(E,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Sobre"})]}),e.jsxs("div",{className:"prose prose-invert max-w-none relative z-10",children:[e.jsx("p",{className:"text-text-secondary leading-relaxed whitespace-pre-line text-sm md:text-base",children:a.about?i?a.about.replace(/\\n/g,`
`):a.about.replace(/\\n/g,`
`).slice(0,500)+(a.about.length>500?"...":""):"Sem descrição disponível."}),a.about&&a.about.length>500&&e.jsx("button",{onClick:()=>n(!i),className:"mt-2 text-primary font-bold hover:underline text-sm focus:outline-none",children:i?"Ver Menos":"Ver Mais"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8 pt-6 border-t border-border-color/50 relative z-10",children:[a.nicknames?.slice(0,4).map((r,c)=>e.jsxs("div",{className:"flex flex-col p-2 rounded-lg hover:bg-white/5 transition-colors",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-primary tracking-wider mb-1",children:"Apelido"}),e.jsx("span",{className:"text-sm font-semibold text-text-primary truncate",title:r,children:r})]},c)),(!a.nicknames||a.nicknames.length===0)&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-text-secondary tracking-wider",children:"Favoritos"}),e.jsx("span",{className:"text-sm font-semibold text-text-primary",children:a.favorites?.toLocaleString()})]})]})]}),e.jsxs("div",{children:[e.jsx(O,{title:"Dubladores",icon:L}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[y.map((r,c)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-bg-secondary border border-border-color hover:border-primary/40 hover:shadow-md hover:shadow-primary/5 hover:-translate-y-1 transition-all duration-300",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cover bg-center shrink-0 border-2 border-transparent group-hover:border-primary/20",style:{backgroundImage:`url('${r.person.images?.jpg?.image_url}')`}}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"text-sm font-bold text-text-primary truncate",children:r.person.name}),e.jsx("p",{className:"text-xs text-text-secondary truncate",children:r.language})]})]},`${r.person.mal_id}-${c}`)),d.length===0&&e.jsx("span",{className:"text-text-secondary text-sm",children:"Nenhum dublador registrado."})]})]}),e.jsxs("div",{children:[e.jsx(D,{title:"Filmografia",icon:M,items:m,renderItem:r=>e.jsxs(F,{to:`/anime/${r.anime.mal_id}`,className:"block w-[140px] md:w-[160px] group relative",children:[e.jsxs("div",{className:"relative aspect-[2/3] rounded-lg overflow-hidden shadow-md border border-border-color group-hover:border-primary/50 transition-all",children:[e.jsx("img",{src:r.anime.images?.jpg?.image_url,alt:r.anime.title,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx("span",{className:G("text-[9px] font-bold px-1.5 py-0.5 rounded shadow-sm",r.role==="Main"?"bg-primary text-white":"bg-black/60 text-white backdrop-blur-md"),children:r.role==="Main"?"MAIN":"SUPP"})})]}),e.jsx("h4",{className:"text-xs font-bold text-text-primary group-hover:text-primary transition-colors line-clamp-2 mt-2",children:r.anime.title})]})}),m.length===0&&e.jsx("p",{className:"text-text-secondary mt-2",children:"Nenhum anime encontrado."})]}),e.jsxs("div",{className:"bg-bg-secondary rounded-2xl p-6 border border-border-color shadow-sm hover:border-primary/30 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Galeria"})]}),o.length>4&&e.jsxs("button",{onClick:()=>p(!0),className:"text-xs font-bold text-primary hover:text-white hover:bg-primary px-3 py-1.5 rounded-md transition-all uppercase tracking-wider",children:["Ver Tudo (",o.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:o.slice(0,4).map((r,c)=>e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer group relative border border-white/5 hover:border-primary/50 transition-all shadow-sm hover:shadow-primary/20",onClick:()=>x(r.jpg.image_url),children:e.jsx("img",{src:r.jpg.image_url,alt:"Character gallery",loading:"lazy",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"})},c))})]})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-bg-primary animate-in fade-in duration-200",children:e.jsxs("div",{className:"w-full h-full flex flex-col max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border-color",children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Galeria Completa"}),e.jsx("button",{onClick:()=>p(!1),className:"p-2 bg-bg-secondary hover:bg-bg-tertiary rounded-full text-text-primary transition-colors",children:e.jsx(w,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:o.map((r,c)=>e.jsx("div",{className:"aspect-[2/3] rounded-xl overflow-hidden cursor-pointer group relative border border-border-color hover:border-primary transition-all shadow-sm",onClick:()=>x(r.jpg.image_url),children:e.jsx("img",{src:r.jpg.image_url,alt:"Gallery full",loading:"lazy",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-500"})},c))})})]})}),b&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:()=>x(null),children:[e.jsx("img",{src:b,alt:"Full size",className:"max-w-full max-h-[90vh] rounded-lg shadow-2xl object-contain"}),e.jsx("button",{className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-md",onClick:r=>{r.stopPropagation(),x(null)},children:e.jsx(w,{className:"w-8 h-8"})})]}),e.jsx(P,{})]})]})}function O({title:s,icon:a}){return e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a&&e.jsx(a,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:s})]})}export{Q as CharacterDetails};
